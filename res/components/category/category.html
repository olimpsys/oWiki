<div class="container-fluid">
    <div class="row">
        <div class="col-xs-12">

            <alert ng-show="isError" type="danger" close="isError = false;">{{errorMsg}}</alert>
            
            <h1>
                {{category.newName|| category.name}}

                <button class="btn btn-default btn-sm pull-right" ng-click="editMode = !editMode;
                            category.newName = category.name;" ng-class="{active: editMode}">
                    <span class="glyphicon glyphicon-cog"></span>
                </button>

            </h1>

            <div ng-show="editMode" class="well pull-right">

                <div class="form-inline">
                    <div class="input-group">
                        <input ng-model="category.newName" type="text" class="form-control" placeholder="Rename Category">
                        <span class="input-group-btn">
                            <button class="btn btn-primary" type="button" ng-click="saveCategory()" ng-disabled="isLoading">
                                <span ng-hide="isLoading">Rename</span>
                                <span ng-show="isLoading">Wait...</span>
                            </button>
                        </span>
                    </div>
                    <br/><br/>
                </div>

                <div class="form-inline" ng-show="categories.length > 0">
                    <div class="input-group">
                        <select ng-model="category.parent" ng-options="category.id as category.name for category in categories" class="form-control">
                            <option value="">Category</option>
                        </select>
                        <span class="input-group-btn">
                            <button class="btn btn-primary" type="button" ng-click="saveCategory()" ng-disabled="isLoading">
                                <span ng-hide="isLoading">Move</span>
                                <span ng-show="isLoading">Wait...</span>
                            </button>
                        </span>
                    </div>
                    <br/><br/>
                </div>

                <button class="btn btn-danger" ng-click="deleteCategory()" ng-disabled="isLoading">
                    <span ng-hide="isLoading">Delete</span>
                    <span ng-show="isLoading">Wait...</span>
                </button>

            </div>

        </div>

    </div>
    <div class="row">
        <div class="col-xs-12 col-sm-4">

            <h3>
                SubCategories
                <button class="btn btn-default btn-xs" ng-click="addSubCatMode = !addSubCatMode;
                            createSubcategoryName = '';" ng-class="{active: addSubCatMode}">
                    <span class="glyphicon glyphicon-plus"></span>
                </button>
            </h3>

            <div class="well" ng-show="addSubCatMode">
                <div class="form-inline">
                    <div class="input-group">
                        <input ng-model="createSubcategoryName" type="text" class="form-control" placeholder="SubCategory name">
                        <span class="input-group-btn">
                            <button class="btn btn-primary" type="button" ng-click="createSubCategory()" ng-disabled="isLoading">
                                <span ng-hide="isLoading">Create</span>
                                <span ng-show="isLoading">Wait...</span>
                            </button>
                        </span>
                    </div>
                </div>
            </div>

            <br/>

            <ul>
                <li ng-repeat="subcategory in category.categories"><h4><a ng-href="#/category/{{subcategory.id}}">{{subcategory.name}}</a></h4></li>
            </ul>

            <br/>

        </div>
        <div class="col-xs-12 col-sm-8">
            <h3>Pages</h3>
            <br/>
            <ul>
                <li ng-repeat="page in category.pages"><h4><a ng-href="#/page/{{page.id}}">{{page.title}}</a></h4></li>
            </ul>

        </div>

    </div>
</div>

